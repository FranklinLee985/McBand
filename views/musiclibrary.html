<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Mcband - project for CSCI3100</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Website Template by freehtml5.co" />
	<meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
	<meta name="author" content="freehtml5.co" />

	<!-- 
	//////////////////////////////////////////////////////

	FREE HTML5 TEMPLATE 
	DESIGNED & DEVELOPED by FreeHTML5.co
		
	Website: 		http://freehtml5.co/
	Email: 			info@freehtml5.co
	Twitter: 		http://twitter.com/fh5co
	Facebook: 		https://www.facebook.com/fh5co

	//////////////////////////////////////////////////////
	 -->

  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<link href="https://fonts.googleapis.com/css?family=Cormorant+Garamond:300,300i,400,400i,500,600i,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Satisfy" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">
	<!-- Flexslider  -->
	<link rel="stylesheet" href="css/flexslider.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="css/style.css">

	<style>
		input[type=search] {
			width: 250px;
			-webkit-transition: width 0.4s ease-in-out;
			transition: width 0.4s ease-in-out;
		}

		/* When the input field gets focus, change its width to 100% */
		input[type=search]:focus {
			width: 100%;
		}

		.modal {
			display: none; /* Hidden by default */
			position: fixed; /* Stay in place */
			z-index: 1; /* Sit on top */
			left: 0;
			top: 0;
			width: 100%; /* Full width */
			height: 100%; /* Full height */
			overflow: auto;
			background-color: rgb(26,26,26);
			background-color: rgba(26,26,26,0.4);
			padding-top: 150px;
		}

		/* Modal Content/Box */
		.modal-content {
			background-color: rgb(26, 26, 26);
			margin: auto auto auto auto;
			border: 4px solid rgba(255, 255, 255, 0.04);
			width: 99%;
		}
	</style>


	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<script src="js/dropzone.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	<!-- filter music by input -->
	<script>
		function filterSearch() {
        	var input, filter, section, colmd4, colmd6, a, i;
			input = document.getElementById("search");
			filter = input.value.toUpperCase();
			section = document.getElementById("all_music");
			colmd4 = section.getElementsByClassName("col-md-4");
			for (i = 0; i < colmd4.length; i++) {
				a = colmd4[i].getElementsByTagName("a")[0];
				if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {
					colmd4[i].style.display = "";
				} else {
					colmd4[i].style.display = "none";
				}
			}
		}
	</script>

	<!-- display all musics -->
	<script>
		var xmlhttp, myObj, x, txt = "";
		xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				myObj = JSON.parse(this.responseText);
				if(myObj == null){
					txt += "No musics yet!"
				}
				else{
					for (x in myObj) {
						txt += "<div class=\"col-md-4\">";
						txt += "<div class=\"col-md-6\">";
						txt += "<a href=\"/music/" + myObj[x].musicId + "\">"+myObj[x].musicname+"</a>";
						txt += "</div>";
						txt += "<div class=\"col-md-6\">";
						txt += "<p>"+myObj[x].uploader+"</p>";
						txt += "</div>";
						txt += "</div>";
					}
				}
				document.getElementById("all_music").innerHTML = txt;
			}
		};
		xmlhttp.open("POST", "/send-music", true);
		xmlhttp.send();
	</script>

	<!--Toggle Like and Unlike; Send changes to backend-->
	<script>
		function like(id){
            var xmlhttp, text;
            text={"musicId": id.name};
            if (window.XMLHttpRequest) {
                // code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            } else {  // code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function() {
                if (this.readyState==4 && this.status==200) {
                    id.value=xmlhttp.responseText;
                }
            };
            xmlhttp.open("POST", "http://127.0.0.1:8888/like-change", true);
            xmlhttp.setRequestHeader("Content-type", "application/json");
            xmlhttp.send(JSON.stringify(text));
            console.log(JSON.stringify(text));
            console.log(typeof JSON.stringify(text));
        }
	</script>

		<!--display Like or Unlike in the like button-->
		<script>
            function showlike(id){
                var xmlhttp,like_button, text;
                like_button = id.getElementsbyclassName("like");
                text={"musicId": like_button.name};
                if (window.XMLHttpRequest) {
                    // code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp=new XMLHttpRequest();
                } else {  // code for IE6, IE5
                    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.onreadystatechange=function() {
                    if (this.readyState==4 && this.status==200) {
                        like_button.value=xmlhttp.responseText;
                    }
                };
                xmlhttp.open("POST", "http://127.0.0.1:8888/like-change", true);
                xmlhttp.setRequestHeader("Content-type", "application/json");
                xmlhttp.send(JSON.stringify(text));
                console.log(JSON.stringify(text));
                console.log(typeof JSON.stringify(text));
            }
		</script>

	</head>
	<body>
		<!--loader-->
		<div class="fh5co-loader"></div>

	    <!--page content-->
	    <div id="page">

	    <!--navigator-->
	    <nav class="fh5co-nav" role="navigation">
			<div class="top-menu">
				<div class="container">
					<div class="row">
							<div class="col-xs-12 text-center logo-wrap">
								<div id="fh5co-logo"><a href="index.html">McBand<span>.</span></a></div>
							</div>
						<div class="col-xs-12 text-center menu-1 menu-wrap">
							<ul>
								<div>
									<li><a href="index.html">Home</a></li>
									<li class="active"><a href="musiclibrary.html">Music library</a></li>
									<li><a href="event.html">Event</a></li>
									<li><a href="account.html">Account</a></li>
									
								</div>
							</ul>
						</div>
					</div>
				</div>
			<% if (locals.logInfo == null) { %>
				<a href="sign.html" class="button" style="float:right; margin-top: -30px; margin-right: 150px;"><i class="icon-user2">   Login</i></a>
			<% } else { %>
				<form action="http://127.0.0.1:8888/logout" method="GET"><a style="float:right; margin-top: -30px; margin-right: 150px;">Hi,<%=locals.logInfo.name %>! <input type="submit" style="border:0 none; background: transparent;" value="Logout"/></a></form>
			<% } %>
			
			</div>
		</nav>

	    <!--header-->
	    <header>
			<br><br><br><br><br><br>
     	</header>

	    <!--ranking-->
	    <div id="fh5co-featured-menu" class="fh5co-section">
		<div class="container">
			<div class="row">
				<div class="col-md-12 fh5co-heading animate-box">
					<h2>Sheet Musics Ranking</h2>
					<div class="row">
						<div class="col-md-3">
							<p>Here are some trending sheet musics.</p>
						</div>
					</div>
				</div>
				
				
				<div class="col-md-3 col-sm-6 col-xs-6 col-xxs-12 fh5co-item-wrap">
					<div class="fh5co-item animate-box" onmouseover="showlike(this)">
						<img src="<%=musicInfo[0].coverPath %>" class="img-responsive" alt="First">
						<div class="middle">
							<a href="/music/<%=musicInfo[0].musicId%>" class="btn btn-primary btn-outline btn-lg" role="button">View</a>
							<input type="submit" class="like btn btn-primary btn-outline btn-lg" onclick="like(this)" name="<%=musicInfo[0].musicId %>" value="<%= musicStatus[0] %>">
						</div>
						<h3><%=musicInfo[0].musicname %></h3>
						<p>&hearts; <%=musicInfo[0].likeCount %></p>
					</div>
					<div class="fh5co-item animate-box" onmouseover="showlike(this)">
						<img src="<%=musicInfo[1].coverPath %>" class="img-responsive" alt="Remember Me">
						<div class="middle">
							<a href="/music/<%=musicInfo[1].musicId%>" class="btn btn-primary btn-outline btn-lg" role="button">View</a>
							<input type="submit" class="like btn btn-primary btn-outline btn-lg" onclick="like(this)" name="<%=musicInfo[1].musicId %>" value="<%= musicStatus[1] %>">
						</div>
						<h3><%=musicInfo[1].musicname %></h3>
						<p>&hearts; <%=musicInfo[1].likeCount %></p>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 col-xs-6 col-xxs-12 fh5co-item-wrap">
					<div class="fh5co-item margin_top animate-box" onmouseover="showlike(this)">
						<img src="<%=musicInfo[2].coverPath %>" class="img-responsive" alt="Divide">
						<div class="middle">
							<a href="/music/<%=musicInfo[2].musicId%>" class="btn btn-primary btn-outline btn-lg" role="button">View</a>
							<input type="submit" class="like btn btn-primary btn-outline btn-lg" onclick="like(this)" name="<%=musicInfo[2].musicId %>" value="<%= musicStatus[2] %>">
						</div>
						<h3><%=musicInfo[2].musicname %></h3>
						<p>&hearts; <%=musicInfo[2].likeCount %></p>
					</div>
					<div class="fh5co-item animate-box" onmouseover="showlike(this)">
						<img src="<%=musicInfo[3].coverPath %>" class="img-responsive" alt="All of Me">
						<div class="middle">
							<a href="/music/<%=musicInfo[3].musicId%>" class="btn btn-primary btn-outline btn-lg" role="button">View</a>
							<input type="submit" class="like btn btn-primary btn-outline btn-lg" onclick="like(this)" name="<%=musicInfo[3].musicId %>" value="<%= musicStatus[3] %>">
						</div>
						<h3><%=musicInfo[3].musicname %></h3>
						<p>&hearts; <%=musicInfo[3].likeCount %></p>
					</div>
				</div>
				<div class="clearfix visible-sm-block visible-xs-block"></div>
				<div class="col-md-3 col-sm-6 col-xs-6 col-xxs-12 fh5co-item-wrap">
					<div class="fh5co-item animate-box" onmouseover="showlike(this)">
						<img src="<%=musicInfo[4].coverPath %>" class="img-responsive" alt="Havana">
						<div class="middle">
							<a href="/music/<%=musicInfo[4].musicId%>" class="btn btn-primary btn-outline btn-lg" role="button">View</a>
							<input type="submit" class="like btn btn-primary btn-outline btn-lg" onclick="like(this)" name="<%=musicInfo[4].musicId %>" value="<%= musicStatus[4] %>">
						</div>
						<h3><%=musicInfo[4].musicname %></h3>
						<p>&hearts; <%=musicInfo[4].likeCount %></p>
					</div>
					<div class="fh5co-item animate-box" onmouseover="showlike(this)">
						<img src="<%=musicInfo[5].coverPath %>" class="img-responsive" alt="Mystery of Love">
						<div class="middle">
							<a href="/music/<%=musicInfo[5].musicId%>"" class="btn btn-primary btn-outline btn-lg" role="button">View</a>
							<input type="submit" class="like btn btn-primary btn-outline btn-lg" onclick="like(this)" name="<%=musicInfo[5].musicId %>" value="<%= musicStatus[5] %>">
						</div>
						<h3><%=musicInfo[5].musicname %></h3>
						<p>&hearts; <%=musicInfo[5].likeCount %></p>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 col-xs-6 col-xxs-12 fh5co-item-wrap">
					<div class="fh5co-item margin_top animate-box" onmouseover="showlike(this)">
						<img src="<%=musicInfo[6].coverPath %>" class="img-responsive" alt="A Million Dreams">
						<div class="middle">
							<a href="/music/<%=musicInfo[6].musicId%>" class="btn btn-primary btn-outline btn-lg" role="button">View</a>
							<input type="submit" class="like btn btn-primary btn-outline btn-lg" onclick="like(this)" name="<%=musicInfo[6].musicId %>" value="<%= musicStatus[6] %>">
						</div>
						<h3><%=musicInfo[6].musicname %></h3>
						<p>&hearts; <%=musicInfo[6].likeCount %></p>
					</div>
					<div class="fh5co-item animate-box" onmouseover="showlike(this)">
						<img src="<%=musicInfo[7].coverPath %>" class="img-responsive" alt="To Make You Feel My Love">
						<div class="middle">
							<a href="/music/<%=musicInfo[7].musicId%>" class="btn btn-primary btn-outline btn-lg" role="button">View</a>
							<input type="submit" class="like btn btn-primary btn-outline btn-lg" onclick="like(this)" name="<%=musicInfo[7].musicId %>" value="<%= musicStatus[7] %>">
						</div>
						<h3><%=musicInfo[7].musicname %></h3>
						<p>&hearts; <%=musicInfo[7].likeCount %></p>
					</div>
				</div>
			</div>
		</div>
	</div>

		<!--search musics-->
		<div id="fh5co-featured-testimony" class="fh5co-section">
			<div class="container">
				<div class="row">
					<div class="col-md-12 fh5co-heading animate-box">
						<h2>Find new sheet musics</h2>
						<div class="row">
							<div class="col-md-6">
								<p>Type in music name, author name or album name to search.</p>
							</div>
						</div>
						<div class="row">
							<div class="col-md-6">
								<input id="search" type="search" class="form-control" name="search" onkeyup="filterSearch()" placeholder="Search...">
							</div>
						</div>

						<br>
						<!--<p><a href="#" class="btn btn-primary btn-outline">Search</a></p>-->
						<div>
							<h3 style="color: #ffffff">Browse All Musics</h3>
						</div>
						<section id="all_music" class="container form-control" style="width: 100%; height: auto; max-height: 500px; overflow: scroll;">

							<div class="col-md-4">
								<div class="col-md-6">
									<a href="musicinfo.html">Perfect</a>
								</div>
								<div class="col-md-6">
									<p>Ed Sheeren</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="col-md-6">
									<a href="musicinfo.html">Perfect</a>
								</div>
								<div class="col-md-6">
									<p>Ed Sheeren</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="col-md-6">
									<a href="musicinfo.html">Perfect</a>
								</div>
								<div class="col-md-6">
									<p>Ed Sheeren</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="col-md-6">
									<a href="musicinfo.html">Perfect</a>
								</div>
								<div class="col-md-6">
									<p>Ed Sheeren</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="col-md-6">
									<a href="musicinfo.html">Perfect</a>
								</div>
								<div class="col-md-6">
									<p>Ed Sheeren</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="col-md-6">
									<a href="musicinfo.html">To Make You Feel My Love</a>
								</div>
								<div class="col-md-6">
									<p>Adele</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="col-md-6">
									<a href="musicinfo.html">Perfect</a>
								</div>
								<div class="col-md-6">
									<p>Ed Sheeren</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="col-md-6">
									<a href="musicinfo.html">Perfect</a>
								</div>
								<div class="col-md-6">
									<p>Ed Sheeren</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="col-md-6">
									<a href="musicinfo.html">Perfect</a>
								</div>
								<div class="col-md-6">
									<p>Ed Sheeren</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="col-md-6">
									<a href="musicinfo.html">Perfect</a>
								</div>
								<div class="col-md-6">
									<p>Ed Sheeren</p>
								</div>
							</div>

						</section>
					</div>

				</div>
			</div>
		</div>

	    <!--upload-->
	    <div id="fh5co-featured-testimony" class="fh5co-section">
		<div class="container">
			<div class="row">
				<div class="col-md-12 fh5co-heading animate-box">
					<h2>Upload Your Creation</h2>
					<div class="row">
						<div class="col-md-6">
							<p>Show your creativity to other music lovers!</p>
						</div>

						<div class="col-md-12">
							<button onclick="document.getElementById('id01').style.display='block'" class="btn btn-primary btn-outline btn-lg">Upload</button>
						</div>

						<div id="id01" class="modal">
							<form class="modal-content zoom" action="http://127.0.0.1:8888/music_upload" method="post" enctype="multipart/form-data">
								<div>
									<div class="container">
										<div class="row form-group">
											<div class="col-md-12 col-sm-12">
												<br>
												<div class="col-md-4 col-sm-4">
													<label for="musicname">Music Name</label>
													<input type="text" class="form-control" name="musicname" required/>
													<label for="sheetmusic">Sheet Music</label>
													<input type="file" class="form-control" name="sheetmusic" accept="application/pdf" required/>
													<label for="audiofile">Audio File</label>
													<input type="file" class="form-control" name="audiofile" accept="audio/mp3" required/>
													<label for="coverpic">Cover Picture</label>
													<input type="file" class="form-control" name="coverpic" accept="image/*" required/>
												</div>

											</div>
											<div class="col-md-12 col-sm-12" style="left: 15px">
												<br>
												<input type="submit" class="btn btn-primary btn-outline btn-lg" value="Submit">
											</div>
										</div>
									</div>
									<br>

								</div>
							</form>
						</div>

					</div>
				</div>
				<script>
                    // Get the modal
                    var modal = document.getElementById('id01');

                    // When the user clicks anywhere outside of the modal, close it
                    window.onclick = function(event) {
                        if (event.target == modal) {
                            modal.style.display = "none";
                        }
                    }
				</script>
			</div>
		</div>
	</div>


		<!--footer-->
		<div class="col-md-12 text-center">
			<p>
				<small class="block"><a>McBand<span>.</span></a> Project for CSCI 3100 <a>Group 16</a></small>
				<br>
				<small class="block">We Build The <a>Greatest</a> Music Cmmunity<a></a></small>
			</p>
			<p>
			<ul class="fh5co-social-icons">
			<li><a href="#"><i class="icon-twitter2"></i></a></li>
			<li><a href="#"><i class="icon-facebook2"></i></a></li>
			<li><a href="#"><i class="icon-linkedin2"></i></a></li>
			<li><a href="#"><i class="icon-dribbble2"></i></a></li>
		</ul>
			</p>
		</div>
	
		<!-- jQuery -->
		<script src="js/jquery.min.js"></script>
		<!-- jQuery Easing -->
		<script src="js/jquery.easing.1.3.js"></script>
		<!-- Bootstrap -->
		<script src="js/bootstrap.min.js"></script>
		<!-- Waypoints -->
		<script src="js/jquery.waypoints.min.js"></script>
		<!-- Waypoints -->
		<script src="js/jquery.stellar.min.js"></script>
		<!-- Flexslider -->
		<script src="js/jquery.flexslider-min.js"></script>
		<!-- Main -->
		<script src="js/main.js"></script>

	    <!--display Like or Unlike in the like button-->
		<script>
	        var xmlhttp, text, array, input, i;
	        //middle = document.getElementsByClassName("middle");
	        //console.log(middle);
	        input = document.getElementsByClassName("like");
	        console.log(input);
	        array =[];
	        for(i = 0; i < input.length; i++){
	            text = {"musicId": input[i].name};
	            array.push(text);
			}
	        if (window.XMLHttpRequest) {
	            // code for IE7+, Firefox, Chrome, Opera, Safari
	            xmlhttp=new XMLHttpRequest();
	        } else {  // code for IE6, IE5
	            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	        }
	        xmlhttp.onreadystatechange=function() {
	            if (this.readyState==4 && this.status==200) {
	                input.value=xmlhttp.responseText;
	            }
	        };
	        xmlhttp.open("POST", "http://127.0.0.1:8888/like-check", true);
	        xmlhttp.setRequestHeader("Content-type", "application/json");
	        console.log(JSON.stringify(array));
	        xmlhttp.send(JSON.stringify(array));
	        console.log(typeof JSON.stringify(array));
		</script>

	</div>
	</body>
</html>

